/* --- styles.css: Full Rebuild con FIX DE BUGS y MEJORAS DE DISEÑO --- */
:root{
  --primary: #004d99; /* Azul Corporativo */
  --accent: #f26522; /* Naranja Contraste */
  --dark: #2c3e50; /* Gris Oscuro/Negro Sobrio */
  --border: #e0e0e0;
  --bg: #f4f7f9; /* Fondo muy claro */
  --card: #fff;
  --success: #27ae60; /* Verde para Guardar */
  --danger: #c0392b; /* Rojo para Borrar */
}

/* FIX: Ocultar elementos de forma robusta, incluyendo el modal y el input file */
.hidden {
  display: none !important; 
}
.modal.hidden {
  display: none !important;
}

*{box-sizing:border-box}
body{
  font-family: 'Inter', "Segoe UI", Roboto, Arial, sans-serif;
  margin:0;
  background:var(--bg);
  color:var(--dark);
}

.wrapper{
  max-width:1020px;
  margin:25px auto;
  background:var(--card);
  border-radius:12px;
  box-shadow:0 10px 30px rgba(0,0,0,0.1);
  overflow:hidden;
}

/* --- HEADER MÁS MODERNO Y LIMPIO --- */
header{
  display:flex;
  gap:16px;
  align-items:center;
  background:var(--dark);
  color:white;
  padding:18px;
  border-bottom: 3px solid var(--primary);
}
.logo{width:80px;height:80px;object-fit:contain}
.header-info h1{margin:0;font-size:1.8rem;color:var(--primary)}
.header-info p{margin:0;font-size:1rem}
.header-info small{font-size:0.75rem;opacity:0.8}

main{padding:25px}

/* --- BARRA DE ACCIONES OT --- */
.ot-bar{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:20px;
  padding:10px 0;
  border-bottom:1px solid var(--border);
}

/* FIX Y MEJORA VISUAL OT NUMBER */
.ot-bar .left {
    display: flex;
    align-items: center;
    background: var(--accent);
    color: white;
    padding: 8px 15px;
    border-radius: 6px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
    margin-right: 20px;
}
.ot-label {
    font-weight: 600;
    margin-right: 10px;
    font-size: 1.1rem;
}
#otNumber {
    font-weight: 800;
    font-size: 1.5rem;
    color: white;
    background: none;
    border: none;
    width: 100px;
    padding: 0;
    text-align: left;
    cursor: default;
}
.ot-bar .right{
    display: flex;
    gap: 10px; /* Separación en escritorio */
    position: relative; /* Necesario para el menú móvil */
}

/* --- BOTONES Y MENÚ MÓVIL --- */
button, .import-label{
  padding:10px 15px;
  border-radius:8px;
  border:none;
  background:var(--primary);
  color:white;
  cursor:pointer;
  font-size:1rem;
  font-weight:600;
  transition:background 0.2s;
  display:inline-flex;
  align-items:center;
  gap:8px;
  text-decoration: none;
}
button:hover, .import-label:hover{background:#003a7a}

.mobile-only{display:none}
@media (max-width:768px){
  .desktop-only{display:none}
  .mobile-only{display:inline-flex}
  .ot-bar .right button{padding:8px 12px}

  /* Menú desplegable */
  .mobile-menu-dropdown{
    position:absolute;
    right:0;
    top:calc(100% + 10px);
    width:250px;
    background:var(--dark);
    border-radius:8px;
    box-shadow:0 8px 16px rgba(0,0,0,0.3);
    z-index:1000;
    padding:10px;
    display:none; /* Hidden by default, controlled by JS */
  }
  .mobile-menu-dropdown.active{display:flex;flex-direction:column;gap:10px;}
  .mobile-menu-dropdown button, .mobile-menu-dropdown .import-label{
      width:100%;
      background:rgba(255,255,255,0.1);
      justify-content:flex-start;
      font-size:0.9rem;
  }
  .mobile-menu-dropdown hr{
    border:none;
    border-top:1px solid rgba(255,255,255,0.2);
    margin:5px 0;
  }
}

/* --- FORMULARIO Y GRIDS --- */
.ot-form{
    display: block;
}

.ot-form label, .ot-form textarea, .ot-form input, .ot-form select{
  display:block;
  width:100%;
}
.ot-form input, .ot-form select, .ot-form textarea{
  padding:10px;
  border:1px solid var(--border);
  border-radius:6px;
  font-size:1rem;
  margin-top:5px;
  margin-bottom:15px;
  font-family:inherit;
  /* MEJORA DISEÑO: Sombra interna para efecto de profundidad */
  box-shadow: inset 0 1px 3px rgba(0,0,0,0.06); 
  transition: border-color 0.2s, box-shadow 0.2s;
}

/* MEJORA DISEÑO: Estado de foco (Focus State) */
.ot-form input:focus, 
.ot-form select:focus, 
.ot-form textarea:focus {
    border-color: var(--primary); 
    box-shadow: 0 0 0 3px rgba(0, 77, 153, 0.2); /* Sombra sutil de color primario */
    outline: none;
}


/* Nuevo Título Principal */
.main-form-title {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--dark);
    text-align: center;
    margin: 20px 0 30px;
}
/* Nuevo Título de Sección con Separador */
.section-title {
    font-size: 1.25rem;
    font-weight: 700;
    color: var(--primary);
    border-bottom: 2px solid var(--primary);
    padding-bottom: 5px;
    margin-top: 30px;
    margin-bottom: 15px;
}

/* GRID LAYOUTS */
.form-group-triple, .form-group-double, .form-group-quad{
  display:grid;
  gap:20px;
}

.form-group-triple{
  grid-template-columns:repeat(3, 1fr);
}
.form-group-double{
  grid-template-columns:repeat(2, 1fr);
}
.form-group-quad{
  grid-template-columns:repeat(4, 1fr);
}

@media (max-width:768px){
    /* En móvil se apilan todos */
    .form-group-triple, .form-group-double, .form-group-quad{
        grid-template-columns:1fr; 
    }
}

/* Checkboxes */
.section-label{display:block;margin-top:15px;font-weight:600}
.checkbox-group{
  display:flex;
  flex-wrap:wrap;
  gap:15px;
  padding:15px;
  border:1px solid var(--border);
  border-radius:6px;
  margin-bottom:20px;
  background:#f9f9f9;
}
.checkbox-group label{
  display:flex;
  align-items:center;
  width:auto;
  margin:0;
  /* MEJORA DISEÑO: Estilo hover en labels */
  padding: 5px 8px; 
  border-radius: 4px;
  cursor: pointer;
  transition: background 0.2s;
}
.checkbox-group label:hover {
  background: #e9e9e9; /* Color de fondo sutil al pasar el mouse */
}
.checkbox-group input[type="checkbox"]{
  width:auto;
  margin-right:5px;
  margin-bottom:0;
}

/* Ocultar/Mostrar campos de abono */
#labelAbono.hidden, #montoAbonadoInput.hidden{display:none}

/* Área de notas legales */
.notes-legal{
    padding:15px;
    border:1px dashed var(--border);
    background:#fff3e0;
    border-radius:8px;
    margin-top:30px;
    font-size:0.9rem;
    color:#444;
}
.notes-legal strong{color:var(--accent)}
.notes-legal ul{list-style-type:disc;padding-left:20px}

/* --- MODAL Y LISTA DE ÓRDENES --- */
.modal{
  position:fixed;top:0;left:0;width:100%;height:100%;
  background:rgba(0,0,0,0.6);z-index:2000;display:flex;justify-content:center;align-items:center;
}
.modal-content{
  background:var(--card);padding:20px;border-radius:10px;max-width:800px;width:90%;max-height:90%;
  display:flex;flex-direction:column;
}
.modal-header{display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid var(--border);padding-bottom:10px;margin-bottom:15px}
.modal-header h3{margin:0;color:var(--primary)}
.modal-body{flex-grow:1;overflow-y:auto}
#searchOt{padding:10px;margin-bottom:15px}
.orders-list{max-height:450px;overflow-y:auto;padding-right:10px}
.order-row{
    display:flex;justify-content:space-between;align-items:center;padding:12px;
    border-bottom:1px solid #e5e5e5;background:var(--bg);border-radius:8px;
    margin-bottom:8px;box-shadow:0 1px 4px rgba(0,0,0,0.08)
}
.order-row:last-child{border-bottom:none}
.order-row b{color:var(--primary)}
.order-actions button{
    margin-left:8px;padding:8px 10px;border-radius:6px;
    border:none;background:var(--primary);color:white;
    cursor:pointer;font-size:0.85rem;
    transition:background 0.2s;
}
.order-actions button:hover{background:#003a7a}
.order-actions button.small{padding:6px 10px}
/* MEJORA DISEÑO: Usar colores distintivos en los botones de acción del modal */
.order-actions button[data-action="load"] {
    background: var(--accent); /* Naranja para Cargar/Editar */
}
.order-actions button[data-action="load"]:hover {
    background: #e55a1d; 
}
.order-actions button[data-action="delete"] {
    background: var(--danger); /* Rojo para Borrar */
}
.order-actions button[data-action="delete"]:hover {
    background: #a13023;
}

footer{background:var(--dark);color:white;padding:15px;text-align:center;font-size:0.85rem}

/* --- ESTILOS DE IMPRESIÓN AJUSTADOS (6mm margen, 9.5pt fuente) --- */
@page{size:letter;margin:6mm} 

@media print{
  body{background:white}
  .wrapper{
    max-width:none;
    margin:0;
    box-shadow:none;
    border-radius:0;
    overflow:visible;
  }
  /* Oculta los elementos de UI y solo muestra el área de impresión */
  header, main, footer, .modal, .ot-bar, .ot-bar .right, .notes-legal, .mobile-menu-dropdown{
    display:none !important;
  }
  .print-area{display:block !important;width:100%}
}
